{"ast":null,"code":"var _jsxFileName = \"/Users/bharath/Documents/Latest_multispeaker/modal/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nimport WaveSurfer from 'wavesurfer.js';\nimport './App.css';\nimport { FaPlay, FaPause, FaDownload, FaSpinner, FaExclamationTriangle, FaGithub } from 'react-icons/fa';\nimport { FiExternalLink } from 'react-icons/fi';\n\n// --- Configuration ---\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_ENDPOINT = process.env.REACT_APP_TTS_API_ENDPOINT;\nconst VEENA_SPEAKER_ID = 'aisha';\nconst PRESET_SENTENCES = [{\n  id: 's1',\n  text: 'कहाँ तक पहुँचे? मैं इंतज़ार कर रहा हूँ।'\n}, {\n  id: 's2',\n  text: 'वीडियो कॉल कर लेंगे, ठीक है?'\n}, {\n  id: 's3',\n  text: 'क्या तुमने आज का मेमो पढ़ा?'\n}, {\n  id: 's4',\n  text: 'अगर ऑर्डर डिलीवर नहीं होता, तो आपका पूरा पैसा वापस कर दिया जाएगा।'\n}, {\n  id: 's5',\n  text: 'पेट्रोल के दाम फिर बढ़ गए क्या?'\n}, {\n  id: 's6',\n  text: 'चलो, वीकेंड में पहाड़ चलते हैं!'\n}, {\n  id: 's7',\n  text: 'यह एक ओपन-सोर्स टेक्स्ट-टू-स्पीच मॉडल है।'\n}, {\n  id: 's8',\n  text: 'माया रिसर्च भारत के लिए AI बना रहा है।'\n}];\nfunction App() {\n  _s();\n  const [text, setText] = useState(PRESET_SENTENCES[0].text);\n  const [selectedPreset, setSelectedPreset] = useState(PRESET_SENTENCES[0].id);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [audioBlob, setAudioBlob] = useState(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [duration, setDuration] = useState(\"00:00\");\n  const [currentTime, setCurrentTime] = useState(\"00:00\");\n  const waveformRef = useRef(null); // For WaveSurfer container\n  const wavesurfer = useRef(null); // For WaveSurfer instance\n  const audioRef = useRef(new Audio()); // Use a detached Audio element for playback control\n\n  useEffect(() => {\n    if (!API_ENDPOINT) {\n      setError('API endpoint (REACT_APP_TTS_API_ENDPOINT) is not configured. Please set it in your environment.');\n      console.error('CRITICAL: REACT_APP_TTS_API_ENDPOINT is not set.');\n    }\n  }, []);\n  const formatTime = time => {\n    const minutes = Math.floor(time / 60);\n    const seconds = Math.floor(time % 60);\n    return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n  };\n\n  // Initialize WaveSurfer\n  useEffect(() => {\n    if (waveformRef.current && !wavesurfer.current) {\n      wavesurfer.current = WaveSurfer.create({\n        container: waveformRef.current,\n        waveColor: 'rgba(54, 255, 77, 0.3)',\n        // Neon green with transparency\n        progressColor: '#36ff4d',\n        // Solid neon green\n        cursorColor: '#ffffff',\n        barWidth: 3,\n        barRadius: 3,\n        responsive: true,\n        height: 100,\n        normalize: true,\n        backend: 'MediaElement' // Use MediaElement backend with our audioRef\n      });\n\n      // Sync WaveSurfer with the detached audio element\n      wavesurfer.current.loadElement(audioRef.current, audioBlob ? [audioBlob] : undefined);\n      wavesurfer.current.on('ready', () => {\n        if (audioRef.current) {\n          setDuration(formatTime(audioRef.current.duration));\n          // Auto-play after ready and blob is set\n          if (audioBlob) {\n            audioRef.current.play().catch(e => console.warn(\"Audio autoplay prevented:\", e));\n          }\n        }\n      });\n      wavesurfer.current.on('audioprocess', () => {\n        if (audioRef.current) {\n          setCurrentTime(formatTime(audioRef.current.currentTime));\n        }\n      });\n      wavesurfer.current.on('interaction', () => {\n        if (audioRef.current && wavesurfer.current) {\n          audioRef.current.currentTime = wavesurfer.current.getCurrentTime();\n        }\n      });\n      wavesurfer.current.on('play', () => setIsPlaying(true));\n      wavesurfer.current.on('pause', () => setIsPlaying(false));\n      wavesurfer.current.on('finish', () => {\n        setIsPlaying(false);\n        wavesurfer.current.seekTo(0); // Reset to beginning\n        setCurrentTime(\"00:00\");\n      });\n    }\n    return () => {\n      if (wavesurfer.current) {\n        wavesurfer.current.destroy();\n        wavesurfer.current = null;\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []); // Run once on mount to setup WaveSurfer container\n\n  // Load audio blob into WaveSurfer and Audio element\n  useEffect(() => {\n    if (audioBlob && wavesurfer.current) {\n      const audioUrl = URL.createObjectURL(audioBlob);\n      audioRef.current.src = audioUrl; // Set src for the detached audio element\n\n      // Wavesurfer needs to be reloaded with the new audio element context if src changes\n      // Or, if it's already loaded with the element, just playing it should be fine.\n      // Let's ensure it's loaded with the blob data directly if possible.\n      wavesurfer.current.load(audioUrl);\n      return () => {\n        URL.revokeObjectURL(audioUrl);\n      };\n    } else if (!audioBlob && wavesurfer.current) {\n      // Clear waveform if no audio blob\n      wavesurfer.current.empty();\n      setDuration(\"00:00\");\n      setCurrentTime(\"00:00\");\n    }\n  }, [audioBlob]);\n  const handleTextChange = event => {\n    setText(event.target.value);\n    setSelectedPreset('');\n    if (error) setError(null);\n  };\n  const handlePresetChange = event => {\n    const sentenceId = event.target.value;\n    setSelectedPreset(sentenceId);\n    const selectedSentence = PRESET_SENTENCES.find(s => s.id === sentenceId);\n    if (selectedSentence) {\n      setText(selectedSentence.text);\n    }\n    if (error) setError(null);\n  };\n  const handleSubmit = async event => {\n    if (event) event.preventDefault();\n    if (!API_ENDPOINT) {\n      setError('API endpoint is not configured.');\n      return;\n    }\n    if (!text.trim()) {\n      setError('Please enter or select some text to synthesize.');\n      return;\n    }\n    setIsLoading(true);\n    setError(null);\n    setAudioBlob(null); // This will trigger useEffect to clear WaveSurfer\n    setIsPlaying(false);\n    setCurrentTime(\"00:00\");\n    setDuration(\"00:00\");\n    const payload = {\n      text: text,\n      speaker_id: VEENA_SPEAKER_ID,\n      output_sample_rate: 24000\n    };\n    try {\n      const response = await axios.post(API_ENDPOINT + '/generate', payload, {\n        responseType: 'blob',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'audio/wav'\n        },\n        timeout: 90000\n      });\n      setAudioBlob(new Blob([response.data], {\n        type: 'audio/wav'\n      }));\n    } catch (err) {\n      console.error('API Error:', err);\n      let errorMessage = 'An unexpected error occurred.';\n      if (err.response) {\n        try {\n          const errorDataText = await err.response.data.text();\n          const errorJson = JSON.parse(errorDataText);\n          errorMessage = errorJson.error || errorJson.detail || `Server error: ${err.response.status}`;\n        } catch (parseError) {\n          errorMessage = `Server error: ${err.response.status} ${err.response.statusText || ''}`;\n        }\n      } else if (err.request) {\n        errorMessage = 'No response from server.';\n      } else {\n        errorMessage = err.message;\n      }\n      setError(errorMessage);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const togglePlayPause = useCallback(() => {\n    if (wavesurfer.current && audioBlob) {\n      wavesurfer.current.playPause();\n    }\n  }, [audioBlob]);\n  const handleDownload = () => {\n    if (audioBlob) {\n      const url = URL.createObjectURL(audioBlob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `veena_tts_maya_research_${text.substring(0, 20).replace(/\\s+/g, '_')}.wav`;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"background-animation\",\n      children: Array.from({\n        length: 50\n      }).map((_, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"line\",\n        style: {\n          left: `${Math.random() * 100}%`,\n          animationDuration: `${Math.random() * 5 + 5}s`,\n          animationDelay: `${Math.random() * 5}s`,\n          height: `${Math.random() * 150 + 50}px`\n        }\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content-wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"App-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"MAYA RESEARCH\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Building AI for India\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"App-main\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tts-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"tts-controls-column\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Veena \\u2013 open-source TTS\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"tagline\",\n              children: \"Lifelike Hindi speech, available to everyone.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: handleSubmit,\n              className: \"tts-form\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"preset-select\",\n                  children: \"Select a sample sentence\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 253,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  id: \"preset-select\",\n                  value: selectedPreset,\n                  onChange: handlePresetChange,\n                  disabled: isLoading || !API_ENDPOINT,\n                  className: \"styled-select\",\n                  children: [PRESET_SENTENCES.map(sentence => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: sentence.id,\n                    children: [sentence.text.substring(0, 50), \"...\"]\n                  }, sentence.id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 262,\n                    columnNumber: 23\n                  }, this)), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"\\u2014 Type custom text below \\u2014\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 264,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 254,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 252,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"text-input\",\n                  children: \"Or type your custom Hindi text (max 200 chars)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 269,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  id: \"text-input\",\n                  value: text,\n                  onChange: handleTextChange,\n                  placeholder: \"\\u092F\\u0939\\u093E\\u0901 \\u0905\\u092A\\u0928\\u093E \\u0939\\u093F\\u0902\\u0926\\u0940 \\u092A\\u093E\\u0920 \\u0932\\u093F\\u0916\\u0947\\u0902...\",\n                  rows: \"4\",\n                  maxLength: \"200\",\n                  className: \"text-input\",\n                  disabled: isLoading || !API_ENDPOINT,\n                  \"aria-label\": \"Hindi text input\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 270,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 268,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"generate-button\",\n                disabled: isLoading || !text.trim() || !API_ENDPOINT,\n                \"aria-label\": \"Generate audio\",\n                children: isLoading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(FaSpinner, {\n                    className: \"spinner-icon\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 291,\n                    columnNumber: 23\n                  }, this), \" GENERATING...\"]\n                }, void 0, true) : 'SYNTHESIZE SPEECH'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 283,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"tts-player-column\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"glass-card\",\n              children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"error-message\",\n                role: \"alert\",\n                children: [/*#__PURE__*/_jsxDEV(FaExclamationTriangle, {\n                  style: {\n                    marginRight: '10px',\n                    verticalAlign: 'middle'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 304,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Error:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 305,\n                  columnNumber: 21\n                }, this), \" \", error]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"sentence-display\",\n                title: \"Phonetic transcription could appear here on hover.\",\n                children: text || \"Your synthesized text will appear here.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 309,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                id: \"waveform\",\n                ref: waveformRef\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 17\n              }, this), (audioBlob || isLoading) && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"audio-player-controls-footer\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: togglePlayPause,\n                  className: \"play-pause-button\",\n                  \"aria-label\": isPlaying ? \"Pause\" : \"Play\",\n                  disabled: !audioBlob || isLoading,\n                  children: isPlaying ? /*#__PURE__*/_jsxDEV(FaPause, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 324,\n                    columnNumber: 38\n                  }, this) : /*#__PURE__*/_jsxDEV(FaPlay, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 324,\n                    columnNumber: 52\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 318,\n                  columnNumber: 22\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"time-indicators-footer\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: currentTime\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 327,\n                    columnNumber: 25\n                  }, this), \" / \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: duration\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 327,\n                    columnNumber: 54\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 326,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handleDownload,\n                  className: \"download-button\",\n                  disabled: !audioBlob || isLoading,\n                  \"aria-label\": \"Download audio\",\n                  children: /*#__PURE__*/_jsxDEV(FaDownload, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 335,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 329,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 19\n              }, this), !isLoading && !audioBlob && !error && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"player-placeholder\",\n                children: \"Synthesize speech to listen and see the waveform.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 341,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"section-separator\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"secondary-content\",\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"https://mayaresearch.ai\",\n          target: \"_blank\",\n          rel: \"noopener noreferrer\",\n          className: \"secondary-link\",\n          children: [\" \", \"Maya Research \", /*#__PURE__*/_jsxDEV(FiExternalLink, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 27\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n        className: \"App-footer\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\xA9 \", new Date().getFullYear(), \" Maya Research\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 227,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"S35iO4pRcd+B05w1TrUGTpt+6Cs=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","axios","WaveSurfer","FaPlay","FaPause","FaDownload","FaSpinner","FaExclamationTriangle","FaGithub","FiExternalLink","jsxDEV","_jsxDEV","Fragment","_Fragment","API_ENDPOINT","process","env","REACT_APP_TTS_API_ENDPOINT","VEENA_SPEAKER_ID","PRESET_SENTENCES","id","text","App","_s","setText","selectedPreset","setSelectedPreset","isLoading","setIsLoading","error","setError","audioBlob","setAudioBlob","isPlaying","setIsPlaying","duration","setDuration","currentTime","setCurrentTime","waveformRef","wavesurfer","audioRef","Audio","console","formatTime","time","minutes","Math","floor","seconds","toString","padStart","current","create","container","waveColor","progressColor","cursorColor","barWidth","barRadius","responsive","height","normalize","backend","loadElement","undefined","on","play","catch","e","warn","getCurrentTime","seekTo","destroy","audioUrl","URL","createObjectURL","src","load","revokeObjectURL","empty","handleTextChange","event","target","value","handlePresetChange","sentenceId","selectedSentence","find","s","handleSubmit","preventDefault","trim","payload","speaker_id","output_sample_rate","response","post","responseType","headers","timeout","Blob","data","type","err","errorMessage","errorDataText","errorJson","JSON","parse","detail","status","parseError","statusText","request","message","togglePlayPause","playPause","handleDownload","url","a","document","createElement","href","download","substring","replace","body","appendChild","click","removeChild","className","children","Array","from","length","map","_","i","style","left","random","animationDuration","animationDelay","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","htmlFor","onChange","disabled","sentence","placeholder","rows","maxLength","role","marginRight","verticalAlign","title","ref","onClick","rel","Date","getFullYear","_c","$RefreshReg$"],"sources":["/Users/bharath/Documents/Latest_multispeaker/modal/frontend/src/App.js"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nimport WaveSurfer from 'wavesurfer.js';\nimport './App.css';\nimport { FaPlay, FaPause, FaDownload, FaSpinner, FaExclamationTriangle, FaGithub } from 'react-icons/fa';\nimport { FiExternalLink } from 'react-icons/fi';\n\n// --- Configuration ---\nconst API_ENDPOINT = process.env.REACT_APP_TTS_API_ENDPOINT;\nconst VEENA_SPEAKER_ID = 'aisha';\n\nconst PRESET_SENTENCES = [\n  { id: 's1', text: 'कहाँ तक पहुँचे? मैं इंतज़ार कर रहा हूँ।' },\n  { id: 's2', text: 'वीडियो कॉल कर लेंगे, ठीक है?' },\n  { id: 's3', text: 'क्या तुमने आज का मेमो पढ़ा?' },\n  { id: 's4', text: 'अगर ऑर्डर डिलीवर नहीं होता, तो आपका पूरा पैसा वापस कर दिया जाएगा।' },\n  { id: 's5', text: 'पेट्रोल के दाम फिर बढ़ गए क्या?' },\n  { id: 's6', text: 'चलो, वीकेंड में पहाड़ चलते हैं!' },\n  { id: 's7', text: 'यह एक ओपन-सोर्स टेक्स्ट-टू-स्पीच मॉडल है।' },\n  { id: 's8', text: 'माया रिसर्च भारत के लिए AI बना रहा है।' },\n];\n\nfunction App() {\n  const [text, setText] = useState(PRESET_SENTENCES[0].text);\n  const [selectedPreset, setSelectedPreset] = useState(PRESET_SENTENCES[0].id);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [audioBlob, setAudioBlob] = useState(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [duration, setDuration] = useState(\"00:00\");\n  const [currentTime, setCurrentTime] = useState(\"00:00\");\n\n  const waveformRef = useRef(null); // For WaveSurfer container\n  const wavesurfer = useRef(null); // For WaveSurfer instance\n  const audioRef = useRef(new Audio()); // Use a detached Audio element for playback control\n\n  useEffect(() => {\n    if (!API_ENDPOINT) {\n      setError('API endpoint (REACT_APP_TTS_API_ENDPOINT) is not configured. Please set it in your environment.');\n      console.error('CRITICAL: REACT_APP_TTS_API_ENDPOINT is not set.');\n    }\n  }, []);\n  \n  const formatTime = (time) => {\n    const minutes = Math.floor(time / 60);\n    const seconds = Math.floor(time % 60);\n    return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n  };\n\n  // Initialize WaveSurfer\n  useEffect(() => {\n    if (waveformRef.current && !wavesurfer.current) {\n      wavesurfer.current = WaveSurfer.create({\n        container: waveformRef.current,\n        waveColor: 'rgba(54, 255, 77, 0.3)', // Neon green with transparency\n        progressColor: '#36ff4d', // Solid neon green\n        cursorColor: '#ffffff',\n        barWidth: 3,\n        barRadius: 3,\n        responsive: true,\n        height: 100,\n        normalize: true,\n        backend: 'MediaElement', // Use MediaElement backend with our audioRef\n      });\n\n      // Sync WaveSurfer with the detached audio element\n      wavesurfer.current.loadElement(audioRef.current, audioBlob ? [audioBlob] : undefined);\n\n\n      wavesurfer.current.on('ready', () => {\n        if (audioRef.current) {\n          setDuration(formatTime(audioRef.current.duration));\n          // Auto-play after ready and blob is set\n          if(audioBlob) {\n            audioRef.current.play().catch(e => console.warn(\"Audio autoplay prevented:\", e));\n          }\n        }\n      });\n\n      wavesurfer.current.on('audioprocess', () => {\n        if (audioRef.current) {\n          setCurrentTime(formatTime(audioRef.current.currentTime));\n        }\n      });\n      \n      wavesurfer.current.on('interaction', () => {\n         if (audioRef.current && wavesurfer.current) {\n            audioRef.current.currentTime = wavesurfer.current.getCurrentTime();\n         }\n      });\n\n      wavesurfer.current.on('play', () => setIsPlaying(true));\n      wavesurfer.current.on('pause', () => setIsPlaying(false));\n      wavesurfer.current.on('finish', () => {\n        setIsPlaying(false);\n        wavesurfer.current.seekTo(0); // Reset to beginning\n        setCurrentTime(\"00:00\");\n      });\n    }\n\n    return () => {\n      if (wavesurfer.current) {\n        wavesurfer.current.destroy();\n        wavesurfer.current = null;\n      }\n    };\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []); // Run once on mount to setup WaveSurfer container\n\n   // Load audio blob into WaveSurfer and Audio element\n   useEffect(() => {\n    if (audioBlob && wavesurfer.current) {\n      const audioUrl = URL.createObjectURL(audioBlob);\n      audioRef.current.src = audioUrl; // Set src for the detached audio element\n      \n      // Wavesurfer needs to be reloaded with the new audio element context if src changes\n      // Or, if it's already loaded with the element, just playing it should be fine.\n      // Let's ensure it's loaded with the blob data directly if possible.\n      wavesurfer.current.load(audioUrl);\n\n      return () => {\n        URL.revokeObjectURL(audioUrl);\n      };\n    } else if (!audioBlob && wavesurfer.current) {\n        // Clear waveform if no audio blob\n        wavesurfer.current.empty();\n        setDuration(\"00:00\");\n        setCurrentTime(\"00:00\");\n    }\n  }, [audioBlob]);\n\n\n  const handleTextChange = (event) => {\n    setText(event.target.value);\n    setSelectedPreset('');\n    if (error) setError(null);\n  };\n\n  const handlePresetChange = (event) => {\n    const sentenceId = event.target.value;\n    setSelectedPreset(sentenceId);\n    const selectedSentence = PRESET_SENTENCES.find(s => s.id === sentenceId);\n    if (selectedSentence) {\n      setText(selectedSentence.text);\n    }\n    if (error) setError(null);\n  };\n\n  const handleSubmit = async (event) => {\n    if (event) event.preventDefault();\n    if (!API_ENDPOINT) {\n      setError('API endpoint is not configured.');\n      return;\n    }\n    if (!text.trim()) {\n      setError('Please enter or select some text to synthesize.');\n      return;\n    }\n\n    setIsLoading(true);\n    setError(null);\n    setAudioBlob(null); // This will trigger useEffect to clear WaveSurfer\n    setIsPlaying(false);\n    setCurrentTime(\"00:00\");\n    setDuration(\"00:00\");\n\n\n    const payload = {\n      text: text,\n      speaker_id: VEENA_SPEAKER_ID,\n      output_sample_rate: 24000,\n    };\n\n    try {\n      const response = await axios.post(API_ENDPOINT + '/generate', payload, {\n        responseType: 'blob',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'audio/wav',\n        },\n        timeout: 90000,\n      });\n      setAudioBlob(new Blob([response.data], { type: 'audio/wav' }));\n    } catch (err) {\n      console.error('API Error:', err);\n      let errorMessage = 'An unexpected error occurred.';\n      if (err.response) {\n        try {\n          const errorDataText = await err.response.data.text();\n          const errorJson = JSON.parse(errorDataText);\n          errorMessage = errorJson.error || errorJson.detail || `Server error: ${err.response.status}`;\n        } catch (parseError) {\n          errorMessage = `Server error: ${err.response.status} ${err.response.statusText || ''}`;\n        }\n      } else if (err.request) {\n        errorMessage = 'No response from server.';\n      } else {\n        errorMessage = err.message;\n      }\n      setError(errorMessage);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const togglePlayPause = useCallback(() => {\n    if (wavesurfer.current && audioBlob) {\n      wavesurfer.current.playPause();\n    }\n  }, [audioBlob]);\n\n\n  const handleDownload = () => {\n    if (audioBlob) {\n      const url = URL.createObjectURL(audioBlob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `veena_tts_maya_research_${text.substring(0, 20).replace(/\\s+/g, '_')}.wav`;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n    }\n  };\n\n  return (\n    <div className=\"App\">\n      <div className=\"background-animation\">\n        {/* Lines for background effect - can be generated dynamically or be static SVGs */}\n        {Array.from({ length: 50 }).map((_, i) => (\n          <div className=\"line\" key={i} style={{\n            left: `${Math.random() * 100}%`,\n            animationDuration: `${Math.random() * 5 + 5}s`,\n            animationDelay: `${Math.random() * 5}s`,\n            height: `${Math.random() * 150 + 50}px`\n          }}></div>\n        ))}\n      </div>\n      <div className=\"content-wrapper\">\n        <header className=\"App-header\">\n          <h1>MAYA RESEARCH</h1>\n          <p>Building AI for India</p>\n        </header>\n\n        <main className=\"App-main\">\n          <div className=\"tts-container\">\n            <div className=\"tts-controls-column\">\n              <h2>Veena – open-source TTS</h2>\n              <p className=\"tagline\">Lifelike Hindi speech, available to everyone.</p>\n\n              <form onSubmit={handleSubmit} className=\"tts-form\">\n                <div className=\"form-group\">\n                  <label htmlFor=\"preset-select\">Select a sample sentence</label>\n                  <select\n                    id=\"preset-select\"\n                    value={selectedPreset}\n                    onChange={handlePresetChange}\n                    disabled={isLoading || !API_ENDPOINT}\n                    className=\"styled-select\"\n                  >\n                    {PRESET_SENTENCES.map(sentence => (\n                      <option key={sentence.id} value={sentence.id}>{sentence.text.substring(0,50)}...</option>\n                    ))}\n                    <option value=\"\">— Type custom text below —</option>\n                  </select>\n                </div>\n\n                <div className=\"form-group\">\n                  <label htmlFor=\"text-input\">Or type your custom Hindi text (max 200 chars)</label>\n                  <textarea\n                    id=\"text-input\"\n                    value={text}\n                    onChange={handleTextChange}\n                    placeholder=\"यहाँ अपना हिंदी पाठ लिखें...\"\n                    rows=\"4\"\n                    maxLength=\"200\"\n                    className=\"text-input\"\n                    disabled={isLoading || !API_ENDPOINT}\n                    aria-label=\"Hindi text input\"\n                  />\n                </div>\n                \n                <button\n                  type=\"submit\"\n                  className=\"generate-button\"\n                  disabled={isLoading || !text.trim() || !API_ENDPOINT}\n                  aria-label=\"Generate audio\"\n                >\n                  {isLoading ? (\n                    <>\n                      <FaSpinner className=\"spinner-icon\" /> GENERATING...\n                    </>\n                  ) : (\n                    'SYNTHESIZE SPEECH'\n                  )}\n                </button>\n              </form>\n            </div>\n\n            <div className=\"tts-player-column\">\n              <div className=\"glass-card\">\n                {error && (\n                  <div className=\"error-message\" role=\"alert\">\n                    <FaExclamationTriangle style={{ marginRight: '10px', verticalAlign: 'middle' }}/>\n                    <strong>Error:</strong> {error}\n                  </div>\n                )}\n                \n                <div className=\"sentence-display\" title=\"Phonetic transcription could appear here on hover.\">\n                  {text || \"Your synthesized text will appear here.\"}\n                </div>\n                \n                <div id=\"waveform\" ref={waveformRef}></div>\n                \n                {/* Controls below waveform */}\n                {(audioBlob || isLoading) && (\n                  <div className=\"audio-player-controls-footer\">\n                     <button \n                        onClick={togglePlayPause} \n                        className=\"play-pause-button\" \n                        aria-label={isPlaying ? \"Pause\" : \"Play\"}\n                        disabled={!audioBlob || isLoading}\n                    >\n                        {isPlaying ? <FaPause /> : <FaPlay />}\n                    </button>\n                    <div className=\"time-indicators-footer\">\n                        <span>{currentTime}</span> / <span>{duration}</span>\n                    </div>\n                    <button \n                        onClick={handleDownload} \n                        className=\"download-button\" \n                        disabled={!audioBlob || isLoading} \n                        aria-label=\"Download audio\"\n                    >\n                        <FaDownload />\n                    </button>\n                  </div>\n                )}\n                \n                {!isLoading && !audioBlob && !error && (\n                  <div className=\"player-placeholder\">\n                      Synthesize speech to listen and see the waveform.\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </main>\n\n        <div className=\"section-separator\"></div>\n\n        <section className=\"secondary-content\">\n          <a href=\"https://mayaresearch.ai\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"secondary-link\"> {/* Example link */}\n            Maya Research <FiExternalLink />\n          </a>\n          \n        </section>\n\n        <footer className=\"App-footer\">\n          <p>© {new Date().getFullYear()} Maya Research</p>\n        </footer>\n      </div>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}